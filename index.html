<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Patient Core Metrics</title>
</head>

<body>

  <h1>Patient Core Metrics</h1>

  <label>
    Weight (kg)
    <input id="weightKg" type="number" step="0.1" min="0" />
  </label>

  <br /><br />

  <label>
    Height (cm)
    <input id="heightCm" type="number" step="0.1" min="0" />
  </label>

  <br /><br />

  <button id="calcBtn" type="button">Calculate</button>

  <h2>Results</h2>
  <div id="results">Enter values and click Calculate.</div>

  <!-- JAVASCRIPT ALWAYS GOES HERE -->
<script>
  function readNumber(id) {
    // .value comes back as a string; Number(...) converts to a JS number
    return Number(document.getElementById(id).value);
  }

  function validate(weightKg, heightCm) {
    if (!isFinite(weightKg) || !isFinite(heightCm)) return "Numbers are required.";
    if (weightKg <= 0) return "Weight must be > 0 kg.";
    if (heightCm <= 0) return "Height must be > 0 cm.";
    return "";
  }

  function calcBMI(weightKg, heightCm) {
    const heightM = heightCm / 100;
    return weightKg / (heightM * heightM);
  }

  function calcBSA(weightKg, heightCm) {
    // Mosteller: sqrt((height(cm) * weight(kg)) / 3600)
    return Math.sqrt((heightCm * weightKg) / 3600);
  }
  
  function classifyBMI(bmi) {
  if (bmi < 18.5) return "Underweight";
  if (bmi < 25) return "Normal";
  if (bmi < 30) return "Overweight";
  return "Obese";
}


  const resultsEl = document.getElementById("results");
  const btn = document.getElementById("calcBtn");

  btn.addEventListener("click", () => {
    const weightKg = readNumber("weightKg");
    const heightCm = readNumber("heightCm");

    const error = validate(weightKg, heightCm);
    if (error) {
      resultsEl.textContent = error;
      return;
    }

    const heightM = heightCm / 100;
    const bmi = calcBMI(weightKg, heightCm);
    const bsa = calcBSA(weightKg, heightCm);
    const bmiClass = classifyBMI(bmi);


    resultsEl.innerHTML =
      `Height: ${heightM.toFixed(2)} m<br>BMI: ${bmi.toFixed(1)} kg/m² (<strong>${bmiClass}</strong>)<br>BSA: ${bsa.toFixed(2)} m²`;
  });
</script>

</body>
</html>
